{"version":3,"file":"popup_opener.min.js","sources":["../src/popup_opener.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * TOTP popup opener module\n *\n * @module     local_totp/popup_opener\n * @copyright  2025, Lo√Øc CRAMPON <loic.crampon@gmail.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery'], function($) {\n    'use strict';\n\n    /**\n     * Initialize the popup opener\n     */\n    var init = function() {\n        // Listen for clicks on popup button.\n        $(document).on('click', '[data-action=\"open-popup\"]', function(e) {\n            e.preventDefault();\n\n            var courseid = $(this).data('courseid');\n            var url = M.cfg.wwwroot + '/local/totp/popup.php?courseid=' + courseid;\n\n            // Calculate popup window size (80% of screen, max 800px).\n            var width = Math.min(800, window.screen.width * 0.8);\n            var height = Math.min(800, window.screen.height * 0.8);\n            var left = (window.screen.width - width) / 2;\n            var top = (window.screen.height - height) / 2;\n\n            // Open popup window (not a new tab).\n            window.open(\n                url,\n                'totp_popup_' + courseid,\n                'width=' + width +\n                ',height=' + height +\n                ',left=' + left +\n                ',top=' + top +\n                ',resizable=yes' +\n                ',scrollbars=no' +\n                ',toolbar=no' +\n                ',menubar=no' +\n                ',location=no' +\n                ',status=no'\n            );\n        });\n    };\n\n    return {\n        init: init\n    };\n});\n"],"names":["define","$","init","document","on","e","preventDefault","courseid","this","data","url","M","cfg","wwwroot","width","Math","min","window","screen","height","left","top","open"],"mappings":";;;;;;;AAuBAA,iCAAO,CAAC,WAAW,SAASC,SAsCjB,CACHC,KAjCO,WAEPD,EAAEE,UAAUC,GAAG,QAAS,8BAA8B,SAASC,GAC3DA,EAAEC,qBAEEC,SAAWN,EAAEO,MAAMC,KAAK,YACxBC,IAAMC,EAAEC,IAAIC,QAAU,kCAAoCN,SAG1DO,MAAQC,KAAKC,IAAI,IAA2B,GAAtBC,OAAOC,OAAOJ,OACpCK,OAASJ,KAAKC,IAAI,IAA4B,GAAvBC,OAAOC,OAAOC,QACrCC,MAAQH,OAAOC,OAAOJ,MAAQA,OAAS,EACvCO,KAAOJ,OAAOC,OAAOC,OAASA,QAAU,EAG5CF,OAAOK,KACHZ,IACA,cAAgBH,SAChB,SAAWO,MACX,WAAaK,OACb,SAAWC,KACX,QAAUC,IAHV"}